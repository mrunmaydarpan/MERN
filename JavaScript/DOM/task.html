<!DOCTYPE html>
<html lang="en">

<head>
    <title>Document</title>
    <link rel="stylesheet" href="../MDB-Free_4.20.0/css/bootstrap.css">
    <link rel="stylesheet" href="../MDB-Free_4.20.0/css/mdb.css">
    <link rel="stylesheet" href="../fontawesome-free-6.2.1-web/fontawesome-free-6.2.1-web/css/all.css">
</head>

<body>
    <div class="container-fluid mt-5">
        <div class="row">
            <div class="col-md-5 m-auto">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h1 class="text-center">Task List App</h1>
                    </div>
                    <div class="card-body bg-dark text-white">
                        <form id="formId">
                            <div class="form-group">
                                <input id="task" type="text" class="form-control" placeholder="Enter your task">
                            </div>
                            <div class="form-group mt-4">
                                <input type="submit" name="" id="sub" class="btn btn-md btn-primary">
                            </div>
                        </form>
                    </div>
                </div>
                <br>
                <div class="card text-center">
                    <div class="card-header bg-primary text-white">Tasks</div>
                    <div class="col-md-12 m-auto">
                        <ul class="list-group" id="addtask">
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script>
            let formTag = document.getElementById('formId');
            let taskTag = document.getElementById('task');
            let taskListTag = document.getElementById('addtask');
            let tasks = localStorage.getItem('tasks') ? JSON.parse(localStorage.getItem('tasks')) : [];

            function display() {
                taskTag.innerHTML = '';
                if (tasks.length !== 0) {
                    for (let i = 0; i < tasks.length; i++) {
                        taskListTag.innerHTML += `<li class="list-group-item bg-primary text-white m-2 listTag">
                    <span>${tasks[i]}</span><button onclick='removeTask(${i})' class="close"><i class="fa fa-times-circle"></i></button>
                    </li>`;
                    }
                } 
            }
            display();
            let listTag = document.getElementsByClassName('listTag');

            function removeTask(num) {
                console.log(num);
                tasks.splice(num, 1);
                localStorage.clear();
                console.log(tasks);
                localStorage.setItem('tasks', JSON.stringify(tasks));
                taskListTag.innerHTML = '';
                display();
            }
            formTag.addEventListener('submit', (e) => {
                // e.preventDefault();
                if (taskTag.value.trim() !== '') {
                    tasks.unshift(taskTag.value.trim());
                    localStorage.setItem('tasks', JSON.stringify(tasks));
                }
            });
            // localStorage.clear();
        </script>
</body>

</html>